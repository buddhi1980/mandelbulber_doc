\section{Materials}\label{materials}\index{materials}

\subsection{Defining and assigning materials}\label{defining-materials}\index{materials!defining}

A material defines the appearance of the surface and volume of an object and can be used to give an object an interesting or even a realistic look. A material which can be used in Mandelbulber can be just plain colors, colors generated by fractal properties, or colors from external files with textures. A material can also define physical properties of an object like transparency, reflectance, roughness or luminosity.

In the program, materials can be defined as distinct entities which can be assigned to multiple objects. In the easiest scenario, only one material could be used for all objects.

All defined materials are visible in the \emph{Materials} dock (figure \ref{materials_dock}).
From this window the user can manage the materials.

\simpleImageWithCaptionHalfWidth{img/manual/media/material_dock.png}
{Docked window with defined material}
{materials_dock}{h}

Clicking on a chosen material will bring up the \emph{Material editor}, where all material properties are visible.

The following options are available in this dock:

\begin{description}
		\item[New material] -- add new definition of a material
		\item[Delete material] -- delete selected material
		\item[Edit material] -- open separate window with \emph{Material editor}
		\item[Load material] -- open file selector for loading an already-defined material
		\item[Save material as] -- open file selector for saving a material into a file
\end{description}

A material can be assigned to different types of objects: main fractal, boolean fractals or primitives. One material can be assigned to many objects. For every object, there needs to be one assigned material.
\pagebreak
\subsubsection{Assigning material to main fractal}\label{assigning-material-to-main-fractal}

To assign a material to the main fractal object, go to \emph{Objects} dock and \emph{Global parameters} tab (figure \ref{materials_assign_to_main_fractal}). Clicking on the material icon will bring up the \emph{Material manager} window where the material can be selected. This selected material will be associated with the main fractal object. Further changes of the material properties in \emph{Material editor} will directly affect all objects with this assigned material.
\nopagebreak
\simpleImageWithCaptionThirdWidth{img/manual/media/material_assign_to_main_fractal.png}
{Material icon in Global parameters}
{materials_assign_to_main_fractal}{h}

\subsubsection{Assigning material to primitive object}\label{assigning-material-to-primitive}

To assign a material to a particular primitive object go to \emph{Objects} dock and \emph{Primitives} tab. Below the parameters of this primitive there is an icon for the material selection (figure \ref{materials_assign_to_primitive}).
 
\nopagebreak
\simpleImageWithCaptionThirdWidth{img/manual/media/material_assign_to_primitive.png}
{Material icon in definition of primitive object}
{materials_assign_to_primitive}{H}

\subsubsection{Assigning material to one of the fractals in boolean mode}\label{assigning-material-to-boolean}

To assign a material to a particular fractal when the boolean mode is enabled, go to \emph{Objects} dock and \emph{Fractals} tab. Then go to the formula tab of the fractal, which should be assigned with the material. The selection of the material is located below the fractal formula parameters (figure \ref{materials_assign_to_boolean}).

\nopagebreak
\simpleImageWithCaptionThirdWidth{img/manual/media/material_assign_to_boolean.png}
{Material icon below fractal formula parameters in boolean mode}
{materials_assign_to_boolean}{H}

\subsection{Editing parameters of materials}\label{materials-parameters}\index{materials!parameters}

The parameters of a material can be edited in the \emph{Material editor} dock. On the top of the material editor is a real-time preview of the material and the name of the material. The name can be edited freely for easier identification of the material.

\subsection{Gradients}\label{materials-gradients}

Gradients can be applied to fractal objects. If a material with gradients is assigned to a primitive object, then the gradient will be ignored and the plain color is used instead (parameter \emph{Surface color}) -- see figure \ref{materials_gradient_on_primitive}.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradients_on_primitives.png}
{Gradient applied to fractal and primitive objects}
{materials_gradient_on_primitive}{h}

\subsubsection{Gradient editor}\label{materials-gradient-editor}

For every parameter which uses a gradient, there is the same type of gradient editor. A gradient can have up to 100 intermediate colors. The first and the last color are always the same, because the gradient is repeated in a loop.

\simpleImageWithCaptionHalfWidth{img/manual/media/material_gradient_editor.png}
{Gradient editor}
{materials_gradient_edtor}{h}

The gradient editor has the following buttons (figure \ref{materials_gradient_edtor}):\index{materials!gradient editor}
\nopagebreak
\begin{description}
	\item[Defined colors (1)] -- colors used in the gradient. A double click on the color opens a window where the color can be changed. The color box can be moved along the gradient (only the first and last color cannot be moved.)
	\item[Randomize colors (2)] -- randomizes all colors in the gradient.
	\item[Randomize all (3)] -- randomizes the number of colors, their positions and the colors.
	\item[Increase brightness (4)] -- increases brightness of all colors.
	\item[Decrease brightness (5)] -- decreases brightness of all colors.
	\item[Invert (6)] -- inverts all colors.
	\item[Increase saturation (7)] -- increases saturation of all colors.
	\item[Decrease saturation (8)] -- decreases saturation of all colors.
\end{description}

Right click on the gradient opens the context menu which has the following options:
\nopagebreak
\begin{description}
	\item[Add] -- adds new color box in the position of mouse pointer.
	\item[Remove] -- removes color box in the position of mouse pointer.
	\item[Delete all] -- deletes all colors from the gradient. Only the first and last color are kept.
	\item[Change number of colors] -- changes number of colors with recalculation of color boxes.
	\item[Grab colors from image] -- opens file selector to choose an image from which colors will be extracted.
	\item[Load colors from file] -- opens file selector to choose a text file with an already-defined gradient.
	\item[Save colors to file] -- opens file selector where gradient will be saved as a text file.
	\item[Copy] -- copies gradient to clipboard. This can be used to copy all colors from one gradient to another one, (e.g. to use the same colors for transparency as used for surface color.)
	\item[Paste] -- pastes gradient from clipboard. 
\end{description}

\subsubsection{Gradient common options}\label{materials-gradient-common-options}

Gradients are used in the material when option \emph{Use colors from gradients} is enabled. Gradients can be used for the following channels: surface color, specular highlights, diffuse, luminosity, roughness, reflectance and transparency.

All of the channels have the following common settings:
\begin{description}
	\item[Palette offset] -- shift colors along the color palette (figures \ref{material-palette-offset-0}, \ref{material-palette-offset-02}, \ref{material-palette-offset-05}.)
	
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_palette_offset_0.png}
	{palette offset = 0}
	{material-palette-offset-0}
	{img/manual/media/material_palette_offset_02.png}
	{palette offset = 0.2}
	{material-palette-offset-02}
	{img/manual/media/material_palette_offset_05.png}
	{palette offset = 0.5}
	{material-palette-offset-05}
	
	\item[Color speed] -- frequency of color changing (figures \ref{material-color_speed_025}, \ref{material-color_speed_1}, \ref{material-color_speed_4}.)
	
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_color_speed_025.png}
	{color speed = 0.25}
	{material-color_speed_025}
	{img/manual/media/material_color_speed_1.png}
	{color speed = 1}
	{material-color_speed_1}
	{img/manual/media/material_color_speed_4.png}
	{color speed = 4}
	{material-color_speed_4}
\end{description}
	
\subsubsection{Coloring orbit trap algorithms}\label{materials-coloring-0rbi-trap-algorithms}
	
Option \emph{Coloring algorithm} allows the selection of the orbit trap algorithm which will be used to distribute colors. These algorithms use particular properties of the fractal calculation (results of orbit trap algorithms.)\index{orbit trap}

\begin{description}
	\item[Standard] -- color index is calculated as the length of z vector
	\begin{center}
		\(c = |z|\)
	\end{center}
	\simpleImageWithCaptionThirdWidth{img/manual/media/material_color_algorithm_standard.png}
	{Standard coloring algorithm}
	{material-coloring-standard}{H}
	
	\item[orbit trap: z.Dot(point)] -- color index is calculated as the dot product of z vector and point coordinates
	\begin{center}
		\(c = |z \cdot p|\)
	\end{center}
	\simpleImageWithCaptionThirdWidth{img/manual/media/material_color_algorithm_zdotpoint.png}
	{orbit trap: z.Dot(point) coloring algorithm}
	{material-coloring-zdotpoint}{H}
	
	\item[orbit trap: Sphere] -- color index is calculated as the distance of z vector from a sphere of the radius defined by the parameter \emph{Orbit trap sphere radius}
	\begin{center}
		\(c = ||z - p|-r|\)
	\end{center}
	\simpleImageWithCaptionThirdWidth{img/manual/media/material_color_algorithm_sphere.png}
	{orbit trap: Sphere coloring algorithm}
	{material-coloring-sphere}{H}
	
	\item[orbit trap: Cross] -- color index is calculated as the distance of z vector from a cross shape orbit trap
	\begin{center}
		\(c = \mathrm{min}(|z.x|, |z.y|, |z.z|)\)
	\end{center}
	\simpleImageWithCaptionThirdWidth{img/manual/media/material_color_algorithm_cross.png}
	{orbit trap: Cross coloring algorithm}
	{material-coloring-cross}{H}
	
	\item[orbit trap: Line] -- color index is calculated as the distance of z vector from a line defined by \emph{Orbit trap line direction vector}
	\begin{center}
		\(c = |z \cdot d|\)
	\end{center}
	\simpleImageWithCaptionThirdWidth{img/manual/media/material_color_algorithm_line_z1.png}
	{orbit trap: Line coloring algorithm (direction vector 0;0;1)}
	{material-coloring-line}{H}
\end{description}

\textbf{4D orbit trap color.} Enables 4D orbit trap algorithms. Result varies depending on the 4D fractal chosen and which orbit trap algorithm is used.

\textbf{Pre-V2.15 orbit trap color}. Enables backwards compatibility. In version 2.15, changes were made to make orbit trap calculations the same for both OpenCL and  Non-OpenCL.

\subsubsection{Gradient for surface color}\label{materials-surface_color-gradient}

Gradient for \emph{surface color} defines the color channel for the fractal surface. It is the default method of coloring fractals.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_color_algorithm_standard.png}
{Color gradient for fractal surface}
{material-color-gradient-example}{H}

\subsubsection{Gradient for specular highlights}\label{materials-specular-gradient}

Gradient for \emph{specular highlights} defines the colors of the specular effect. More details about this effect are in chapter \ref{materials-specular}.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_specular.png}
{Gradient for specular effect colors}
{material-color-gradient-specular}{H}

\subsubsection{Gradient for diffuse}\label{materials-diffuse-gradient}.

Gradient for \emph{diffuse} defines the intensity of the diffuse channel. A brighter gradient causes stronger light diffusion, which means wider specular highlights and less visible reflections. More details about specular highlights are in chapter \ref{materials-specular}

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_diffuse.png}
{Gradient for diffusion channel}
{material-color-gradient-diffuse}{H}

\subsubsection{Gradient for luminosity}\label{materials-luminosity-gradient}
Gradient for \emph{luminosity} defines the intensity of the luminosity channel. This property is enabled when the \emph{luminosity} parameter has a value greater than zero. More details about luminosity are in chapter \ref{materials-luminosity}.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_luminosity.png}
{Gradient for luminosity channel with enabled Monte Carlo Global Illumination and luminosity = 10}
{material-color-gradient-luminosity}{H}

\subsubsection{Gradient for roughness}\label{materials-roughness-gradient}

Gradient for \emph{roughness} defines the intensity of the roughness effect. This property has an effect when \emph{Rough surface} is enabled. More details about roughness are in chapter \ref{materials-roughness}.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_roughness.png}
{Gradient for roughness intensity}
{material-color-gradient-roughness}{H}

\subsubsection{Gradient for reflectance}\label{materials-reflectance-gradient}

Gradient for \emph{reflectance} defines the amount and color of the reflected light. This property is enabled when the \emph{Reflectance} parameter is greater than zero. More details about reflectance are in chapter \ref{materials-reflectance}.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_reflectance.png}
{Gradient for reflectance color and intensity}
{material-color-gradient-reflectance}{H}

\subsubsection{Gradient for transparency}\label{materials-transparency-gradient}

Gradient for \emph{transparency} defines the color of transparency and opacity. This property is enabled when the \emph{Transparency} parameter is greater than zero. 
It is recommended to use bright colors in the gradient for transparency. More details about transparency are in chapter \ref{materials-transparency}.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_transparency_bright.png}
{Gradient for transparency color - example of bright colors to get high transparency}
{material-color-gradient-transparency-bright}{H}

\simpleImageWithCaptionThirdWidth{img/manual/media/material_gradient_transparency.png}
{Gradient for transparency color}
{material-color-gradient-transparency}{H}

\subsection{Surface color}\label{materials-surface_color}

This property defines the color of diffused light which is applied on the whole object. This color is used when \emph{surface color gradient} is disabled or when the material is applied to a primitive object.
This  color is mixed with colors from bitmap texture.

\simpleImageWithCaptionThirdWidth{img/manual/media/material_surface_color.png}
{Different surface colors}
{material-surface-color-example}{H}

\subsection{Shading}\label{materials-shading}

When \emph{shading} parameter is 1.0, then the surface brightness depends on the angle of incidence of light. Decreasing this parameter reduces the strength of this rule. When it is 0, then the surface color has the same brightness at every angle. 

\threeImagesWithTwoCaptionsFullWidth
{img/manual/media/material_shadng_0.png}
{shading = 0}
{material-shading-0}
{img/manual/media/material_shadng_05.png}
{shading = 0.5}
{material-shading-05}
{img/manual/media/material_shadng_1.png}
{shading = 1.0}
{material-shading-1}

\subsection{Specular highlights}\label{materials-specular}

Specular highlights are bright spots of light that appears on shiny objects when illuminated. This effect is very fast to calculate compared to light reflections. Specular highlights provide a strong visual cue for the shape of an object and its location with respect to light sources in the scene.
There are two types of highlights in Mandelbulber, which can be used simultaneously:
\begin{description}
	\item[Plastic specular reflections] where the color is the same as the light source color and doesn't depend on the surface color
	\item[Metallic specular reflections] where the color is a mix of the light source color and the surface color
\end{description}

\threeImagesWithTwoCaptionsFullWidth
{img/manual/media/material_specular_off.png}
{no highlights}
{material-specular off}
{img/manual/media/material_specular_plastic.png}
{plastic}
{material-specular-plastic}
{img/manual/media/material_specular_metallic.png}
{metallic}
{metallic-specular-metallic}

The following parameters are used to define the appearance of the specular highlights
\begin{description}
	\item[Specular highlight color] adds color to highlights
	\simpleImageWithCaptionThirdWidth{img/manual/media/material_specular_color.png}
	{Different colors of specular highlights}
	{material-specular-colors}{H}

	\item[Specular highlight brightness] controls the visibility of the highlights
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_specular_brigness_05.png}
	{brightness = 0.5}
	{material-specular-brightness-0}
	{img/manual/media/material_specular_brigness_2.png}
	{brightness = 2}
	{material-specular-brightness-05}
	{img/manual/media/material_specular_brigness_10.png}
	{brightness = 10}
	{material-specular-brightness-1}
	
	\item[Specular highlight width] controls the size of the bright spots
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_specular_width_0006.png}
	{width = 0.006}
	{material-specular-width-0006}
	{img/manual/media/material_specular_width_005.png}
	{width = 0.05}
	{material-specular-width-005}
	{img/manual/media/material_specular_width_02.png}
	{width = 0.2}
	{material-specular-width-02}
	
	\item[Roughness] controls the roughness of the metallic specular highlights
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_specular_metalic_roughness_01.png}
	{roughness = 0.1}
	{material-specular-roughness-01}
	{img/manual/media/material_specular_metalic_roughness_1.png}
	{roughness = 1}
	{material-specular-roughness-1}
	{img/manual/media/material_specular_metalic_roughness_10.png}
	{roughness = 10}
	{material-specular-roughness-10}
		
\end{description}

\subsection{Rough surface}\label{materials-roughness}

\emph{Rough surface} property randomizes the direction of reflected and refracted light. This effect gives very good results when it is used with high reflectance. To get blurred reflections it is recommended to enable \emph{Monte Carlo algorithm} in \emph{Effect / Ray-tracing} tab. \emph{Roughness} parameter controls the intensity of the effect.

\threeImagesWithTwoCaptionsFullWidth
{img/manual/media/material_rougness_0.png}
{roughness = 0}
{material-surface-roughness-0}
{img/manual/media/material_rougness_001.png}
{roughness = 0.01}
{material-surface-roughness-001}
{img/manual/media/material_rougness_01.png}
{roughness = 0.1}
{material-surface-roughness-01}

\subsection{Iridescence}\label{materials-iridescence}

\emph{Iridescence} effect creates gradual change color as the angle of view or the angle of illumination changes. In nature this phenomenon is visible on soap bubbles or on seashell nacre. 
Iridescence in visible on specular highlights, glossy or transparent surfaces. 

 \simpleImageWithCaptionThirdWidth{img/manual/media/material_iridescence.png}
 {Example of iridescence effect}
 {material-iridescence-example}{H}

In most of cases default parameters of iridescence effect gives satisfactory results, but there are two parameters which control this effect.

\begin{description}
	\item[Intensity] controls visibility of iridescence effect
	
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_iridescence_intensity_1.png}
	{iridescence intensity = 1}
	{material-iridescence-intensity-1}
	{img/manual/media/material_iridescence_intensity_2.png}
	{iridescence intensity = 2}
	{material-iridescence-intensity-2}
	{img/manual/media/material_iridescence_intensity_4.png}
	{iridescence intensity = 4}
	{material-iridescence-intensity-4}
	
	\item[Subsurface relative thickness] controls simulated thickness of layer where iridescence is created. Higher value causes more frequent color changes but effect is weaker.
	
	\threeImagesWithTwoCaptionsFullWidth
	{img/manual/media/material_iridescence_thickness_05.png}
	{Subsurface relative thickness = 0.5}
	{material-iridescence-thickness-05}
	{img/manual/media/material_iridescence_thickness_1.png}
	{Subsurface relative thickness = 1}
	{material-iridescence-thickness-1}
	{img/manual/media/material_iridescence_thickness_2.png}
	{Subsurface relative thickness = 2}
	{material-iridescence-thickness-2}
	
\end{description}

\subsection{Luminosity}\label{materials-luminosity}

\emph{Luminosity} property makes the surface bright even when the object is not illuminated by any light source. When \emph{Monte Carlo algorithm} and \emph{Calculate MC global illumination} are enabled, objects with high luminosity can illuminate other objects in the scene. 

\begin{description}
	\item[Luminosity] defines the intensity of the effect. To get the effect of illumination of the scene in\emph{ MC Global Illumination} mode, the \emph{luminosity} value has to be very high (about 5 - 100). 
	\item[Luminosity color] defines the color of emitted light.
\end{description}

\simpleImageWithCaptionThirdWidth{img/manual/media/material_luminosity.png}
{High luminosity values (about 5) and MC global illumination enabled}
{material-luminosity}{H}

\subsection{Reflectance}\label{materials-reflectance}

\subsection{Transparency}\label{materials-transparency}

\subsection{Common options for textures}\label{materials-textures}

\subsection{Advanced color parameters}\label{materials-advanced-color-parameters}

Coloring of a fractal can be derived from the information that is available throughout the iteration process.

The simplest is coloring a point based on the original location of the point.
Next is coloring a point based on the final location of the point at termination of the iteration process.

However, we can derive more complex algorithms based on data obtained during the iteration process, (e.g. orbit trap algorithms and aux.color algorithms).

All of the above can be used together to form even more complicated algorithms.

\textbf{Orbit trap} algorithms have already been covered above; however, more complex versions can be coded but they will increase calculation time. The orbit trap output is called \textbf{colorMin}.

\textbf{Aux.color} value is generally generated by whether an if() condition is met on an iteration. For instance if z.x \textgreater\space folding\_limit, then increase the aux.color value, if it does not, then the value remains unchanged for that iteration. The final aux.color value for a point is the summation of the values at termination. This generally results in color banding. However, some of the newer formulas have aux.color algorithms that do not produce color banding.

There are also a few transform-based color algorithms, that use aux.color or aux.colorHybrid:

T>DIFS Hybrid Color - for coloring T>DIFS.

T>Hybrid Color - more options for coloring based on the points position at termination.

T>Hybrid Color2 - more options for coloring based on data from the iteration loop.

\subsubsection{Normal Mode Color (single formula mode and boolean mode)}\label{materials-normal-mode-color}

For each formula there is one of five color functions assigned.
These are different to hybrid mode color. Color by numbers allows for converion between normal and hybrid modes.


\subsubsection{Extra Hybrid Mode Color Options}\label{materials-extra-hybrid-mode-color-options}

When in hybrid mode (and more than one slot is enabled), the color is calculated as the addition of three parts:

\(final color = orbit trap  +  aux.color  +  \frac{radius}{aux.DE}\)

With standard hybrid mode coloring the ratio of the three parts is fixed.

With Extra Hybrid Mode Color Options enabled, the influence of the three parts can be controlled. This also allows for some backwards compatibility with Pre V2.15 color. If Extra Hybrid Mode Color Options is disabled, then the calculation is run without the scales, and is faster.

\textbf{Notes: }The aux.color default value is 1.0; so even if the formula does not have any aux.color components, there still be some influence. Depending on the formula, the \(\frac{radius}{aux.DE}\) component has little influence.

\subsubsection{Color by numbers}\label{materials-color-by-numbers}

Color by numbers is an exact mathematical approach (which also helps with fractal calculation diagnostics).

Color by numbers components are mixed by weights and the summation of the colorValue components is multiplied by 256 to produce the Final ColorValue.

With the default palette gradient and the Color Speed set to 1.0, then a 3D distance of 1.0 equates to a colorValue of 1.0 and a Final ColorValue of 256. Along the default palette, Final ColorValue 0 = Orange, 256 = Green, 512 = Pale Yellow, etc.
Knowing colorValues numbers allows us to manipulate colors in specific ways (from simple to complex).

The color palette size is 2560 Final ColorValue units long. In color by numbers, the palette repeats the sequence until it reaches the Maximum ColorValue limit.

\textbf{Initial colorValue}. Default is 0.0. Increasing this allows for the use of negative colorValues.

\textbf{ColorValue Initial Conditions Components}
By default, all points have an initial colorValue of 0.0. Here it is possible to change the initial colorValue  based on the coordinates of the original point "c", (using radius\_c and c.x, c.y \& c.z.) Coloring can be applied using these functions alone or with other functions.

\twoImagesWithTwoCaptionsFullWidth{img/manual/media/initial_conditions.png}
{Mandelbox 12.0 high with 1.0 bands based on intial conditions}
{initial_conditions}
{img/manual/media/initial_conditions_pk.png}
{Using c.z for vertical variation}
{initial_conditions_pk}{H}

\textbf{Orbit trap component}. Apply a weight to the orbit trap output colorMin.

\textbf{Auxillary color components}. Apply weights to aux.color and aux.colorHybrid outputs obtained from some fractals and transforms.

\textbf{Radius components} 

A component value is added based on the distance of the point from the origin at termination.
This is similar to one iteration of Standard orbit trap coloring. This is also used for some backwards compatibility issues.

\simpleImageWithCaptionThirdWidth{img/manual/media/pseudoK_Cbn_rad.png}
{Radius components}
{pseudoK_Cbn_rad}{H}

\textbf{Radius / DE components}

A component value is added based on the distance of the point from the origin divided by the DE value at termination. If the fractal has only DE based on scale, then this will have little effect as the radius will remain proportional to DE, but does work with pseudo kleinian. This is mainly used for some backwards compatibility issues.

\simpleImageWithCaptionThirdWidth{img/manual/media/pseudoK_Cbn_rad_de.png}
{Radius / DE components}
{pseudoK_Cbn_rad_de.png}{H}

\textbf{Axis Bias}

These functions are tools to globally manipulate/distort the color across the fractal surfaces.
 
\twoImagesWithTwoCaptionsFullWidth{img/manual/media/xyz_bias.png}
{XYZ bias}
{xyz_bias}
{img/manual/media/pseudoK_Cbn_xyz.png}
{XYZ bias}
{pseudoK_Cbn_xyz}{H}

\textbf{ColorValue iteration components}

As this is iteration based, it produces color banding.

\simpleImageWithCaptionThirdWidth{img/manual/media/pseudoK_Cbn_iter_comp.png}
{iteration components}
{pseudoK_Cbn_iter_comp}{H}

\textbf{Final ColorValue Controls}
Thes palette deforming options have been superseded to some extent by the implementation of the adjustable palette gradient. The last component Round is still useful.

These functions add a varying value to the Final ColorValue. The starting point of the function along the palette can be set, so as to control the location of the beginning of the deformation.

These functions are calculated before getting the RGB color from the palette. They only manipulate Final ColorValues, so they need a range of colorValue inputs to work. These functions are global and work on the whole palette. The default palette is linear, with the colors spaced evenly apart, with a smooth symmetrical transition between each of them. The first three curve functions effectively deform the palette such that the colors are no longer evenly spaced.

The additionCurve function (for lack of a better name) is an inverse function, producing a steep curve that levels off towards a known value. Low colorValue colors will come closer together and high colorValues will all increase by approximately the same amount.

\simpleImageWithCaptionThirdWidth{img/manual/media/col_add_curve.png}
{addition curve function}
{col_add_curve}{H}

The parabolic curve produces gradual change over low colorValues in comparison to rapid increase for higher colorValues.

\simpleImageWithCaptionThirdWidth{img/manual/media/col_para.png}
{parabolic function}
{col_para}{H}

The trig curve is sinusoidal. The additions to deform the palette are derived from a cos curve (period = 1 covers a 256-unit length of the palette. A very large period makes it work similar to a parabolic.

\simpleImageWithCaptionThirdWidth{img/manual/media/col_trig.png}
{trig function}
{col_trig}{H}

The round option produces uniformly-colored bands with no transitions.

\simpleImageWithCaptionThirdWidth{img/manual/media/col_round.png}
{round function}
{col_round}{H}

Minimum and Maximum Final ColorValue parameters limit the palette and can be helpful in determining what colorValue is producing a certain area of color.







